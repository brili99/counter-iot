import RPi.GPIO as GPIO
import mysql.connector

mydb = mysql.connector.connect(
    host="localhost",
    user="pi",
    password="raspberry",
    database="mydatabase"
)

pin_btn1 = 8
pin_btn2 = 10
pin_btn3 = 12
pin_btn4 = 16
pin_btn5 = 18

GPIO.setmode(GPIO.BCM)
GPIO.setup(pin_btn1, GPIO.IN)
GPIO.setup(pin_btn2, GPIO.IN)
GPIO.setup(pin_btn3, GPIO.IN)
GPIO.setup(pin_btn4, GPIO.IN)
GPIO.setup(pin_btn5, GPIO.IN)

btn1 = GPIO.input(pin_btn1)
btn2 = GPIO.input(pin_btn2)
btn3 = GPIO.input(pin_btn3)
btn4 = GPIO.input(pin_btn4)
btn5 = GPIO.input(pin_btn5)


def add_counter(nmr_btn):
    mycursor = mydb.cursor()
    mycursor.execute("SELECT counter FROM status WHERE btn='"+nmr_btn+"'")
    myresult = mycursor.fetchall()
    counter = myresult[0] + 1
    mycursor.execute("UPDATE status SET counter='" +
                     counter+"' WHERE btn='"+nmr_btn+"'")
    print("")


try:
    while True:
        if GPIO.input(pin_btn1) == 1:
            add_counter(1)
except:
    print("An exception occurred")
